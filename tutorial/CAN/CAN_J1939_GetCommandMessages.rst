CAN J1939 Get Request Messages
*******************************

.. contents:: Contents
    :local:

.. toctree::
    :maxdepth: 1

Get Requests
------------

Get requests are used by other ECUs in the network
to retrieve information from the OpenIMU300RI.  All Get requests are formed as a
Request message as specified earlier.
They are used to request PGNs which have a transmission rate of "On Request".
The format and content of the Request message is To Be Provided.
The following Get Requests are implemented in the example application.  The user can modify the
existing requests and responses and add requests and responses as needed.


.. table::  *Get Requests*
    :align: left

    +-------------------------------+-------------+-------------+--------------+
    | **Request**                   || *PGN*      || **PS**     || **Payload** |
    |                               || (hex)      || (dec)      | **Length**   |
    |                               || (See note) || (See note) | (bytes)      |
    +-------------------------------+-------------+-------------+--------------+
    | *Software Version*            | FEDA        | 218         | 5            |
    +-------------------------------+-------------+-------------+--------------+
    | *ECU ID*                      | FDC5        | 197         | 8            |
    +-------------------------------+-------------+-------------+--------------+
    | *Hardware BIT*                | FF52        | 82          | 2            |
    +-------------------------------+-------------+-------------+--------------+
    | *Software BIT*                | FF53        | 83          | 2            |
    +-------------------------------+-------------+-------------+--------------+
    | *Status*                      | FF54        | 84          | 2            |
    +-------------------------------+-------------+-------------+--------------+
    | *Packet Rate*                 | FF55        | 85          | 2            |
    +-------------------------------+-------------+-------------+--------------+
    | *Packet Type*                 | FF56        | 86          | 2            |
    +-------------------------------+-------------+-------------+--------------+
    | *Digital Cutoff Frequency*    | FF57        | 87          | 3            |
    +-------------------------------+-------------+-------------+--------------+
    | *Orientation*                 | FF58        | 88          | 3            |
    +-------------------------------+-------------+-------------+--------------+

.. note::

    Provided PS values for all but the *Get Software Version* and *Get ECU ID* can be changed by the "Set Bank0 PS Value"
    or "Set Bank1 PS Values" message  The give values are the pre-defined values.

Responses to Get Requests
--------------------------
The following table describe the payloads for responses to Get Requests


.. table::    *Software Version Response Payload*
    :align: left

    +-----------+-----------------------+
    | **Byte**  | **Description**       |
    +-----------+-----------------------+
    | 0         | Major Version Number  |
    +-----------+-----------------------+
    | 1         | Minor Version Number  |
    +-----------+-----------------------+
    | 2         | Patch Number          |
    +-----------+-----------------------+
    | 3         | Stage Number          |
    +-----------+-----------------------+
    | 4         | Build Number          |
    +-----------+-----------------------+

.. table::    *ECU ID Response Payload*
    :align: left

    +----------+---------------------------------+-------------+
    | **Byte** | **Contents**                    | **Acronym** |
    +----------+---------------------------------+-------------+
    | 0        || bits 0:2 - Priority            || Prio       |
    |          || bit  3   - Extended Data Page  || EDP        |
    |          || bit  4   - Data Page           || DP         |
    |          || bits 5:7 - Reserved Bits       || R          |
    +----------+---------------------------------+-------------+
    | 1        | PDU Format                      | PF          |
    +----------+---------------------------------+-------------+
    | 2        | PDU Specific                    | PS          |
    +----------+---------------------------------+-------------+
    | 3        | Source Address                  | SA          |
    +----------+---------------------------------+-------------+


.. table::    *Hardware BIT Response Payload*
    :align: left

    +---------+-----------------+------------------------------------------+
    | **Bit** | **Description** | **Value**                                |
    +---------+-----------------+------------------------------------------+
    | 0       | MasterFail      | 0=normal, 1=fatal error has occurred     |
    +---------+-----------------+------------------------------------------+
    | 1       | sensorError     | 0=normal, 1=internal hardware error      |
    +---------+-----------------+------------------------------------------+
    | 2       | rateError       | 0=normal, 1=internal gyro error          |
    +---------+-----------------+------------------------------------------+
    | 3       | accelError      | 0=normal, 1=internal accelerometer error |
    +---------+-----------------+------------------------------------------+
    | 4 - 15  | Reserved        | Reserved                                 |
    +---------+-----------------+------------------------------------------+


.. table::    *Software BIT Response Payload*
    :align: left

    +---------+---------------------+-------------------------------------+
    | **Bit** | **Description**     | **Value**                           |
    +---------+---------------------+-------------------------------------+
    | 0       | softwareError       | 0=normal, 1=internal software error |
    +---------+---------------------+-------------------------------------+
    | 1       | algorithmError      | 0=normal, 1=error                   |
    +---------+---------------------+-------------------------------------+
    | 2       | dataError           | 0=normal, 1=error                   |
    +---------+---------------------+-------------------------------------+
    | 3       | initError           | 0=normal, 1=error in algorithm init |
    +---------+---------------------+-------------------------------------+
    | 4       | overRange           | 0=normal, 1=error - reset algorithm |
    +---------+---------------------+-------------------------------------+
    | 5       | CalibrationCRCError | 0=normal, 1=incorrect CRC           |
    +---------+---------------------+-------------------------------------+
    | 6 - 15  | Reserved            | Reserved                            |
    +---------+---------------------+-------------------------------------+


.. table::    *Status Response Payload*
    :align: left

    +---------+-------------------------------+-----------------------------------------------------------------+
    | **Bit** | **Description**               | **Value**                                                       |
    +---------+-------------------------------+-----------------------------------------------------------------+
    | 0       | masterStatus                  | 0=normal, 1=hardware, sensor or software alert                  |
    +---------+-------------------------------+-----------------------------------------------------------------+
    | 1       | hardwareStatus                | 0=normal, 1=programmable alert                                  |
    +---------+-------------------------------+-----------------------------------------------------------------+
    | 2       | softwareStatus                | 0=normal, 1=programmable alert                                  |
    +---------+-------------------------------+-----------------------------------------------------------------+
    | 3       | sensorStatus                  | 0=normal, 1=programmable alert                                  |
    +---------+-------------------------------+-----------------------------------------------------------------+
    | 4       | Reserved                      | Reserved                                                        |
    +---------+-------------------------------+-----------------------------------------------------------------+
    | 5       | Reserved                      | Reserved                                                        |
    +---------+-------------------------------+-----------------------------------------------------------------+
    | 6       | Reserved                      | Reserved                                                        |
    +---------+-------------------------------+-----------------------------------------------------------------+
    | 7       | unlockedEEPROM                | 0=locked, 1=unlocked                                            |
    +---------+-------------------------------+-----------------------------------------------------------------+
    | 8       | algorithmInit                 | 0=normal, 1=in initial mode                                     |
    +---------+-------------------------------+-----------------------------------------------------------------+
    | 9       | Reserved                      | Reserved                                                        |
    +---------+-------------------------------+-----------------------------------------------------------------+
    | 10      | Aceinna_attitude_only_algo    | 0=normal, 1=programmable alert                                  |
    +---------+-------------------------------+-----------------------------------------------------------------+
    | 11      | turnSwitch                    | 0=off, 1=yaw rate greater than turnSwitch threshold             |
    +---------+-------------------------------+-----------------------------------------------------------------+
    | 12      | SensoroverRange               | 0=not asserted, 1=asserted (when Asserted unit should be reset) |
    +---------+-------------------------------+-----------------------------------------------------------------+
    | 13      | Reserved                      | Reserved                                                        |
    +---------+-------------------------------+-----------------------------------------------------------------+
    | 14      | Reserved                      | Reserved                                                        |
    +---------+-------------------------------+-----------------------------------------------------------------+
    | 15      | Reserved                      | Reserved                                                        |
    +---------+-------------------------------+-----------------------------------------------------------------+
